<!DOCTYPE html>
<html>
    <head>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <link href="signup_style.css" rel="stylesheet" />
    <title>회원가입 페이지</title>
</head>
<body>
    <h1>회원가입</h1>
<form action="#">
    <input id="useremail" class="input-area" type="email" pattern=".+@mju\.ac\.kr" placeholder="example@mju.ac.kr" required>
    <input id="useremail-ckeck" class="input-area" type="text" placeholder="인증번호 입력">
    <input id="username" class="input-area" type="text" placeholder="닉네임">
    <input id="userpassward" class="input-area" type="password" placeholder="비밀번호" minlength="6">
    <input id="userpassward-check" class="input-area" type="password" placeholder="비밀번호확인">
    <select id="userdepartment" class="input-area" >
        <option selected disabled>-학과를 선택하세요-</option>
        <option>컴퓨터공학과</option>
        <option>시각디자인과</option>
    </select>
    <script type = "text/babel">
        class App extends React.Component {
        constructor(props) {
            super(props);
            this.sendEmail = this.sendEmail.bind(this)
            this.state = {
                mail: '',
                usingemail: false, // 인증번호가 맞아서 가입가능한가??
                number: '',      //보내진 인증번호
                inputnumber: '', //내가 입력한 인증번호
                             // 이 두개가 똑같아야 한다
            }
        }
        render() {
            return <button id="btn-email-send" onClick = {this.sendEmail}><h1>클릭</h1></button>
        }
        sendEmail (event) {
            event.preventDefault();
            console.log(this.state.mail);
            const data = {
                mail: this.state.mail           //입력한 email state값
            }

        fetch('ec2-43-201-82-81.ap-northeast-2.compute.amazonaws.com/auth/register/mail',{
            method: "post",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
        })
        .then(res => res.json())
        .then(json => {
            this.setState({
                number: json.number,       //number이름의 state값에 생성한 인증번호를 받아옴
            })

            console.log(this.state.number);
        })
        
        }
    }
    const container = document.getElementById('root')
    ReactDOM.render(<App/>, container)
    </script>
    <button id="btn-email-send" id = "root" class="btn-email">인증메일<br>보내기</button>
    <button id="btn-email-check" class="btn-email"btn-email>확인</button>
    <input id="finish" type="submit" value="가입하기">
    <a href="#"><img class="MJMK" src="/images/mjuMark.png" alt="MJMK 로고"></a>
</form>
</body>
</html>